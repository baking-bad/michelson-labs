<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Chapter 4 | Michelson Labs</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon.png">
    <meta name="description" content="Interactive learning course">
    <link rel="preload" href="/assets/css/0.styles.86ed2476.css" as="style"><link rel="preload" href="/assets/js/app.1efd7695.js" as="script"><link rel="preload" href="/assets/js/2.f4f16137.js" as="script"><link rel="preload" href="/assets/js/12.9f4477a1.js" as="script"><link rel="preload" href="/assets/js/4.ac851716.js" as="script"><link rel="preload" href="/assets/js/3.2c98d5d1.js" as="script"><link rel="prefetch" href="/assets/js/10.b65f81b5.js"><link rel="prefetch" href="/assets/js/11.50879eea.js"><link rel="prefetch" href="/assets/js/13.871518a0.js"><link rel="prefetch" href="/assets/js/14.31b3c10a.js"><link rel="prefetch" href="/assets/js/15.376c5f77.js"><link rel="prefetch" href="/assets/js/16.f6f0de8c.js"><link rel="prefetch" href="/assets/js/17.3b673c56.js"><link rel="prefetch" href="/assets/js/18.dd8f9148.js"><link rel="prefetch" href="/assets/js/19.e0a1a628.js"><link rel="prefetch" href="/assets/js/20.dc822c9e.js"><link rel="prefetch" href="/assets/js/21.26d015f6.js"><link rel="prefetch" href="/assets/js/22.39bfed70.js"><link rel="prefetch" href="/assets/js/23.1b0ba217.js"><link rel="prefetch" href="/assets/js/24.01c9793a.js"><link rel="prefetch" href="/assets/js/5.464f1237.js"><link rel="prefetch" href="/assets/js/6.f8279457.js"><link rel="prefetch" href="/assets/js/7.7079b0c4.js"><link rel="prefetch" href="/assets/js/8.f2522e14.js"><link rel="prefetch" href="/assets/js/9.a6b0ba72.js">
    <link rel="stylesheet" href="/assets/css/0.styles.86ed2476.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="Michelson Labs" class="logo"> <span class="site-name can-hide">Michelson Labs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/learn.html" class="nav-link">
  Learn
</a></div><div class="nav-item"><a href="/introduction.html" class="nav-link">
  Notebooks 
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/learn.html" class="nav-link">
  Learn
</a></div><div class="nav-item"><a href="/introduction.html" class="nav-link">
  Notebooks 
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/learn.html" class="sidebar-link">Learn Michelson</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/learn.html#why-🤔" class="sidebar-link">Why 🤔</a></li><li class="sidebar-sub-header"><a href="/learn.html#how" class="sidebar-link">How</a></li><li class="sidebar-sub-header"><a href="/learn.html#resources" class="sidebar-link">Resources</a></li><li class="sidebar-sub-header"><a href="/learn.html#contact-us" class="sidebar-link">Contact us</a></li><li class="sidebar-sub-header"><a href="/learn.html#about" class="sidebar-link">About</a></li></ul></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Notebooks</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/introduction.html" class="sidebar-link">Introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/introduction.html#notebook-workflow" class="sidebar-link">Notebook workflow</a></li><li class="sidebar-sub-header"><a href="/introduction.html#run-online" class="sidebar-link">Run online</a></li><li class="sidebar-sub-header"><a href="/introduction.html#run-in-docker" class="sidebar-link">Run in Docker</a></li><li class="sidebar-sub-header"><a href="/introduction.html#install-jupyter" class="sidebar-link">Install Jupyter</a></li></ul></li><li><a href="/chapters/01.html" class="sidebar-link">Chapter 1</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/chapters/01.html#understanding-the-stack" class="sidebar-link">Understanding the stack</a></li><li class="sidebar-sub-header"><a href="/chapters/01.html#structure-of-a-smart-contract" class="sidebar-link">Structure of a Smart Contract</a></li><li class="sidebar-sub-header"><a href="/chapters/01.html#operation-codes" class="sidebar-link">Operation codes</a></li><li class="sidebar-sub-header"><a href="/chapters/01.html#running-the-contract-step-by-step" class="sidebar-link">Running the contract step-by-step</a></li></ul></li><li><a href="/chapters/02.html" class="sidebar-link">Chapter 2</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/chapters/02.html#types-in-michelson" class="sidebar-link">Types in Michelson</a></li><li class="sidebar-sub-header"><a href="/chapters/02.html#advanced-stack-usage" class="sidebar-link">Advanced stack usage</a></li></ul></li><li><a href="/chapters/03.html" class="sidebar-link">Chapter 3</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/chapters/03.html#compare-and-generic-comparisons" class="sidebar-link">Compare and generic comparisons</a></li><li class="sidebar-sub-header"><a href="/chapters/03.html#conditionals" class="sidebar-link">Conditionals</a></li><li class="sidebar-sub-header"><a href="/chapters/03.html#fail-and-assert" class="sidebar-link">FAIL and ASSERT</a></li><li class="sidebar-sub-header"><a href="/chapters/03.html#recap" class="sidebar-link">Recap</a></li></ul></li><li><a href="/chapters/04.html" aria-current="page" class="active sidebar-link">Chapter 4</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/chapters/04.html#available-types-for-arithmetic-operations" class="sidebar-link">Available types for arithmetic operations</a></li><li class="sidebar-sub-header"><a href="/chapters/04.html#the-add-instruction" class="sidebar-link">The `ADD` instruction</a></li><li class="sidebar-sub-header"><a href="/chapters/04.html#the-sub-instruction" class="sidebar-link">The `SUB` instruction</a></li><li class="sidebar-sub-header"><a href="/chapters/04.html#the-mul-instruction" class="sidebar-link">The `MUL` instruction</a></li><li class="sidebar-sub-header"><a href="/chapters/04.html#the-ediv-instruction" class="sidebar-link">The `EDIV` instruction</a></li><li class="sidebar-sub-header"><a href="/chapters/04.html#other-operations-on-numeric-values" class="sidebar-link">Other operations on numeric values</a></li></ul></li><li><a href="/chapters/05.html" class="sidebar-link">Chapter 5</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/chapters/05.html#mutez-and-mutez-operations" class="sidebar-link">mutez and mutez operations</a></li><li class="sidebar-sub-header"><a href="/chapters/05.html#balance-amount-and-now" class="sidebar-link">`BALANCE`, `AMOUNT` and `NOW`</a></li><li class="sidebar-sub-header"><a href="/chapters/05.html#address-contract-and-token-transfer" class="sidebar-link">Address, contract and token transfer</a></li></ul></li><li><a href="/chapters/06.html" class="sidebar-link">Chapter 6</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/chapters/06.html#boolean-type-and-operations-on-booleans" class="sidebar-link">Boolean type and operations on booleans</a></li><li class="sidebar-sub-header"><a href="/chapters/06.html#cryptographic-operations" class="sidebar-link">Cryptographic operations</a></li></ul></li><li><a href="/chapters/07.html" class="sidebar-link">Chapter 7</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/chapters/07.html#strings-and-string-manipulations" class="sidebar-link">Strings and string manipulations</a></li><li class="sidebar-sub-header"><a href="/chapters/07.html#working-with-lists" class="sidebar-link">Working with lists</a></li></ul></li><li><a href="/chapters/08.html" class="sidebar-link">Chapter 8</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/chapters/08.html#overview-of-the-pair-type" class="sidebar-link">Overview of the pair type</a></li><li class="sidebar-sub-header"><a href="/chapters/08.html#operations-on-pairs" class="sidebar-link">Operations on pairs</a></li><li class="sidebar-sub-header"><a href="/chapters/08.html#pairing-and-unpairing" class="sidebar-link">Pairing and unpairing</a></li></ul></li><li><a href="/chapters/99.html" class="sidebar-link">/chapters/99.html</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="chapter-4"><a href="#chapter-4" class="header-anchor">#</a> Chapter 4</h1> <p>Among all operations that you can execute in a smart contract, arithmetic operations are probably the most common ones, but also the simplest ones. After all, computers in general were created to provide an easy way to do arithmetic operations that started to become too complex.</p> <p>Within your smart contract, you may want to add or subtract tokens to the balance of your users or you may want to multiply or divide different values. As you will understand it when reading what follows, it will be extremely easy in Michelson. You only have two conditions to remember before trying any operation: first, you must make sure that you have two elements on top of the stack. Second, you must verify that these two elements are of comparable types and of types that work together.</p> <p>Unlike programming languages that you may already be familiar with, Michelson doesn't use arithmetic operators you know like <strong>+</strong>, <strong>-</strong>, <strong>*</strong> or <strong>/</strong>. Everything is &quot;instruction-based&quot; and you will have to use instructions that modify the stack to make operations.</p> <h2 id="available-types-for-arithmetic-operations"><a href="#available-types-for-arithmetic-operations" class="header-anchor">#</a> Available types for arithmetic operations</h2> <p>As you may have already guessed, Michelson allows us to work with <code>int</code> and <code>nat</code> for arithmetic operations. An operation of two <code>int</code> will yield an <code>int</code> and an operation of two<code>nat</code> will yield a <code>nat</code>. These two types can be used together for addition, subtraction, multiplication and division but as long there is an <code>int</code> in your operation, the result will also be an <code>int</code>. For example, <code>int + nat = int</code>.</p> <p>In addition to <code>int</code> and <code>nat</code>, you can use other types for arithmetic operations, for example <code>mutez</code> and <code>timestamp</code>. Here is a table that sums up all the possible combinations and the type of the result:</p> <table><thead><tr><th style="text-align:center;">Value type</th> <th style="text-align:center;">Available operation</th> <th style="text-align:center;">Value type</th> <th style="text-align:center;">Result type</th></tr></thead> <tbody><tr><td style="text-align:center;">int</td> <td style="text-align:center;">ADD/SUB/MUL/EDIV</td> <td style="text-align:center;">int</td> <td style="text-align:center;">int</td></tr> <tr><td style="text-align:center;">nat</td> <td style="text-align:center;">ADD/SUB/MUL/EDIV</td> <td style="text-align:center;">nat</td> <td style="text-align:center;">int</td></tr> <tr><td style="text-align:center;">int</td> <td style="text-align:center;">ADD/SUB/MUL/EDIV</td> <td style="text-align:center;">nat</td> <td style="text-align:center;">int</td></tr> <tr><td style="text-align:center;">timestamp</td> <td style="text-align:center;">ADD/SUB</td> <td style="text-align:center;">int</td> <td style="text-align:center;">timestamp</td></tr> <tr><td style="text-align:center;">timestamp</td> <td style="text-align:center;">SUB</td> <td style="text-align:center;">timestamp</td> <td style="text-align:center;">int</td></tr> <tr><td style="text-align:center;">mutez</td> <td style="text-align:center;">ADD/SUB</td> <td style="text-align:center;">mutez</td> <td style="text-align:center;">mutez</td></tr> <tr><td style="text-align:center;">mutez</td> <td style="text-align:center;">MUL/EDIV</td> <td style="text-align:center;">nat</td> <td style="text-align:center;">mutez</td></tr></tbody></table> <p>A few considerations to keep in mind regarding the table above:</p> <ul><li>Be always very mindful about the return type when you put <code>int</code> and <code>nat</code> together. You may spend some time scratching your head and wondering why you are not getting the type you are expecting because you overlooked the types you are using in your operation.</li> <li>A few operations are available for types outside of <code>int</code> and <code>nat</code>, but they are somehow limited (for logical reasons). For example, it wouldn't make any sense to multiply timestamps with other values or multiply <code>mutez</code> together.</li> <li>Other limitations are set in place for safety purposes: limiting the possible operations on <code>mutez</code> prevents negative balances or integer overflow.</li></ul> <h2 id="the-add-instruction"><a href="#the-add-instruction" class="header-anchor">#</a> The <strong><code>ADD</code></strong> instruction</h2> <p>The first instruction we are going to play with is the <strong><code>ADD</code></strong> instruction. As its name suggests, it takes two values and add them together. If you refer to the table above, you can observe that it is one of the most widely available instruction throughout the different types. <strong><code>ADD</code></strong> also allows you to use different types of values, keeping in mind that the return type is always fix.</p> <p>Let's check some examples and see how it works:</p> <div class="language-Michelson extra-class"><pre class="language-Michelson"><code class="language-Michelson"><span class="token comment">## We quickly initialize a contract environment to manipulate different values on the stack</span><span class="token punctuation">
</span><span class="token keyword">storage</span><span class="token punctuation"> </span><span class="token class-name">unit</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token keyword">parameter</span><span class="token punctuation"> </span><span class="token class-name">unit</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token keyword">BEGIN</span><span class="token punctuation"> </span><span class="token number">Unit</span><span class="token punctuation"> </span><span class="token number">Unit</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">DROP</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span></code></pre></div><div class="stdout"><pre><span class="stream-name">stdout</span><br>storage unit;
parameter unit;
BEGIN: use %default; drop all; push (Unit, Unit);
DROP: pop (Unit, Unit);</pre></div> <p>In this first example, we push 2 <code>int</code> on to the stack and add them.<br>
As you can see, the return value is of type <code>int</code> and is the result of <code>5 + 5</code>.</p> <div class="language-Michelson extra-class"><pre class="language-Michelson"><code class="language-Michelson"><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">int</span><span class="token punctuation"> </span><span class="token number">5</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">int</span><span class="token punctuation"> </span><span class="token number">5</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">ADD</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span></code></pre></div><div class="stdout"><pre><span class="stream-name">stdout</span><br>PUSH: push 5;
PUSH: push 5;
ADD: pop 5, 5; push 10;</pre></div> <div class="embedded-html"><table><thead><tr><th>value                                  </th><th>type                                    </th></tr></thead> <tbody><tr><td><pre style="text-align:left;">10</pre></td><td><pre style="text-align:left;">int</pre></td></tr></tbody></table></div> <p>Now we have a value of type <code>int</code> on top of the stack. Let's push a value of type <code>nat</code> and see what happens:</p> <div class="language-Michelson extra-class"><pre class="language-Michelson"><code class="language-Michelson"><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">nat</span><span class="token punctuation"> </span><span class="token number">5</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">ADD</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span></code></pre></div><div class="stdout"><pre><span class="stream-name">stdout</span><br>PUSH: push 5;
ADD: pop 5, 10; push 15;</pre></div> <div class="embedded-html"><table><thead><tr><th>value                                  </th><th>type                                    </th></tr></thead> <tbody><tr><td><pre style="text-align:left;">15</pre></td><td><pre style="text-align:left;">int</pre></td></tr></tbody></table></div> <p>As expected, <code>int 10 + nat 5</code> equals <code>int 15</code>. The addition of <code>int</code> and <code>nat</code> always yields an <code>int</code> (<em>for logical reasons, the result of something like <code>int -20 + nat 5</code> cannot be a <code>nat</code> value</em>).</p> <p>In the next snippet, you will see a new instruction, <strong><code>NOW</code></strong>. We will come back to it in a later chapter, just know for now that it pushes the current timestamp on top of the stack. We can then use the timestamp to demonstrate how <strong><code>ADD</code></strong> works with values of this type:</p> <div class="language-Michelson extra-class"><pre class="language-Michelson"><code class="language-Michelson"><span class="token operator">NOW</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">ADD</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span></code></pre></div><div class="stdout"><pre><span class="stream-name">stdout</span><br>NOW: push 1592111017;
ADD: pop 1592111017, 15; push 1592111032;</pre></div> <div class="embedded-html"><table><thead><tr><th>value                                          </th><th>type                                          </th></tr></thead> <tbody><tr><td><pre style="text-align:left;">1592111032</pre></td><td><pre style="text-align:left;">timestamp</pre></td></tr></tbody></table></div> <p>According to the day and time you are running this code block, the timestamp will be different. However, you should clearly see that the initial value has been incremented with <code>15</code>, which was the value we had in our stack when we pushed the timestamp. You can also push a value and add it to the existing timestamp:</p> <div class="language-Michelson extra-class"><pre class="language-Michelson"><code class="language-Michelson"><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">int</span><span class="token punctuation"> </span><span class="token number">500</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">ADD</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span></code></pre></div><div class="stdout"><pre><span class="stream-name">stdout</span><br>PUSH: push 500;
ADD: pop 500, 1592111032; push 1592111532;</pre></div> <div class="embedded-html"><table><thead><tr><th>value                                          </th><th>type                                          </th></tr></thead> <tbody><tr><td><pre style="text-align:left;">1592111532</pre></td><td><pre style="text-align:left;">timestamp</pre></td></tr></tbody></table></div> <p>Let's clean our stack and see how adding <code>mutez</code> together works. As in the previous examples, we just push two values on top of the stack and add them. This yields a result in <code>mutez</code>:</p> <div class="language-Michelson extra-class"><pre class="language-Michelson"><code class="language-Michelson"><span class="token operator">DROP</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">mutez</span><span class="token punctuation"> </span><span class="token number">50</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">mutez</span><span class="token punctuation"> </span><span class="token number">20</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">ADD</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span></code></pre></div><div class="stdout"><pre><span class="stream-name">stdout</span><br>DROP: pop 1592111532;
PUSH: push 50;
PUSH: push 20;
ADD: pop 20, 50; push 70;</pre></div> <div class="embedded-html"><table><thead><tr><th>value                                  </th><th>type                                      </th></tr></thead> <tbody><tr><td><pre style="text-align:left;">70</pre></td><td><pre style="text-align:left;">mutez</pre></td></tr></tbody></table></div> <p>Keep in mind that <code>mutez</code> values are NOT tezzies but a <em>representation</em> of their value. When writing <code>PUSH mutez 50</code>, you are not manipulating tezzies, only their representation. There are specific instructions we will study later that tell the contract to send actual tezzies.</p> <h2 id="the-sub-instruction"><a href="#the-sub-instruction" class="header-anchor">#</a> The <strong><code>SUB</code></strong> instruction</h2> <p>After adding different amounts comes a time when you have to subtract 😅 The <strong><code>SUB</code></strong> instruction works very similarly to the <strong><code>ADD</code></strong> instruction outside of a few exceptions we are going to study here.</p> <p>First, let's start with a simple example:</p> <div class="language-Michelson extra-class"><pre class="language-Michelson"><code class="language-Michelson"><span class="token operator">DROP</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation"> </span><span class="token comment">## let's start with a clean stack</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">int</span><span class="token punctuation"> </span><span class="token number">3</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">int</span><span class="token punctuation"> </span><span class="token number">5</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">SUB</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span></code></pre></div><div class="stdout"><pre><span class="stream-name">stdout</span><br>DROP: pop 70;
PUSH: push 3;
PUSH: push 5;
SUB: pop 5, 3; push 2;</pre></div> <div class="embedded-html"><table><thead><tr><th>value                                 </th><th>type                                    </th></tr></thead> <tbody><tr><td><pre style="text-align:left;">2</pre></td><td><pre style="text-align:left;">int</pre></td></tr></tbody></table></div> <p>In this example, you can see that we push <code>3</code> to the stack, then <code>5</code> before subtracting <code>3</code> from <code>5</code>.<br>
In a subtraction, the order of the elements is essential, this is why you have to remember the right order of the elements in the stack: <code>5 - 3</code> is not going to yield the same result as <code>3 - 5</code>!<br>
Let's see what would happen if we push the values in the reverse order:</p> <div class="language-Michelson extra-class"><pre class="language-Michelson"><code class="language-Michelson"><span class="token operator">DROP</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">int</span><span class="token punctuation"> </span><span class="token number">5</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">int</span><span class="token punctuation"> </span><span class="token number">3</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">SUB</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span></code></pre></div><div class="stdout"><pre><span class="stream-name">stdout</span><br>DROP: pop 2;
PUSH: push 5;
PUSH: push 3;
SUB: pop 3, 5; push -2;</pre></div> <div class="embedded-html"><table><thead><tr><th>value                                  </th><th>type                                    </th></tr></thead> <tbody><tr><td><pre style="text-align:left;">-2</pre></td><td><pre style="text-align:left;">int</pre></td></tr></tbody></table></div> <p>As you can see, you get now <code>-2</code>. This may be what you want, as integers can have negative values.</p> <p><strong><code>SUB</code></strong> is going to work a little differently for <code>nat</code> values:</p> <div class="language-Michelson extra-class"><pre class="language-Michelson"><code class="language-Michelson"><span class="token operator">DROP</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">nat</span><span class="token punctuation"> </span><span class="token number">5</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">nat</span><span class="token punctuation"> </span><span class="token number">3</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">SUB</span><span class="token punctuation"> </span><span class="token attr-name">@first_value</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">nat</span><span class="token punctuation"> </span><span class="token number">3</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">nat</span><span class="token punctuation"> </span><span class="token number">5</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">SUB</span><span class="token punctuation"> </span><span class="token attr-name">@second_value</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token keyword">DUMP</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span></code></pre></div><div class="stdout"><pre><span class="stream-name">stdout</span><br>DROP: pop -2;
PUSH: push 5;
PUSH: push 3;
SUB: pop 3, 5; push -2;
PUSH: push 3;
PUSH: push 5;
SUB: pop 5, 3; push 2;</pre></div> <div class="embedded-html"><table><thead><tr><th>value                                  </th><th>type                                    </th><th>name                                              </th></tr></thead> <tbody><tr><td><pre style="text-align:left;">2</pre></td><td><pre style="text-align:left;">int</pre></td><td><pre style="text-align:left;">@second_value</pre></td></tr> <tr><td><pre style="text-align:left;">-2</pre></td><td><pre style="text-align:left;">int</pre></td><td><pre style="text-align:left;">@first_value</pre></td></tr></tbody></table></div> <p>Something very interesting happens here, can you spot it? We started with <code>nat</code> values and we end up with <code>int</code> values! The result of the subtraction of 2 <code>nat</code> values is always an <code>int</code> as there is a possibility for a negative number. Now, an <code>int</code> value may not be what you want. Maybe you are updating a <code>nat</code> value in your storage and you need a <code>nat</code> value to put it back in the storage. In this case, you can use the <strong><code>ABS</code></strong> instruction. <strong><code>ABS</code></strong> turns an <code>int</code> value into a <code>nat</code> value. As usual, make sure that the top element of the stack is of type <code>int</code> before using it:</p> <div class="language-Michelson extra-class"><pre class="language-Michelson"><code class="language-Michelson"><span class="token operator">ABS</span><span class="token punctuation"> </span><span class="token attr-name">@second_value</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">SWAP</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">ABS</span><span class="token punctuation"> </span><span class="token attr-name">@first_value</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token keyword">DUMP</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span></code></pre></div><div class="stdout"><pre><span class="stream-name">stdout</span><br>ABS: pop 2; push 2;
SWAP: pop 2, -2; push 2; push -2;
ABS: pop -2; push 2;</pre></div> <div class="embedded-html"><table><thead><tr><th>value                                 </th><th>type                                    </th><th>name                                              </th></tr></thead> <tbody><tr><td><pre style="text-align:left;">2</pre></td><td><pre style="text-align:left;">nat</pre></td><td><pre style="text-align:left;">@first_value</pre></td></tr> <tr><td><pre style="text-align:left;">2</pre></td><td><pre style="text-align:left;">nat</pre></td><td><pre style="text-align:left;">@second_value</pre></td></tr></tbody></table></div> <p>You can also use <strong><code>SUB</code></strong> with timestamps. In this case, you can only subtract <code>int</code> values from timestamps that represent the number of seconds to subtract, for example:</p> <div class="language-Michelson extra-class"><pre class="language-Michelson"><code class="language-Michelson"><span class="token keyword">DROP_ALL</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation"> </span><span class="token comment">## DROP_ALL is a non-Michelson instruction used in these notebooks to reset the stack to zero</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">int</span><span class="token punctuation"> </span><span class="token number">100</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">NOW</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">SUB</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span></code></pre></div><div class="stdout"><pre><span class="stream-name">stdout</span><br>DROP_ALL: drop all;
PUSH: push 100;
NOW: push 1592111022;
SUB: pop 1592111022, 100; push 1592110922;</pre></div> <div class="embedded-html"><table><thead><tr><th>value                                          </th><th>type                                          </th></tr></thead> <tbody><tr><td><pre style="text-align:left;">1592110922</pre></td><td><pre style="text-align:left;">timestamp</pre></td></tr></tbody></table></div> <p>In the steps of the execution, you can observe that the current timestamp is pushed onto the stack before <code>100</code> is subtracted from it.<br>
If you wish, you can also subtract one timestamp from another to get the difference in seconds between both of them:</p> <div class="language-Michelson extra-class"><pre class="language-Michelson"><code class="language-Michelson"><span class="token operator">DROP</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">int</span><span class="token punctuation"> </span><span class="token number">100</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">NOW</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">SUB</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">NOW</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">SUB</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span></code></pre></div><div class="stdout"><pre><span class="stream-name">stdout</span><br>DROP: pop 1592110922;
PUSH: push 100;
NOW: push 1592111024;
SUB: pop 1592111024, 100; push 1592110924;
NOW: push 1592111024;
SUB: pop 1592111024, 1592110924; push 100;</pre></div> <div class="embedded-html"><table><thead><tr><th>value                                   </th><th>type                                    </th></tr></thead> <tbody><tr><td><pre style="text-align:left;">100</pre></td><td><pre style="text-align:left;">int</pre></td></tr></tbody></table></div> <p>In a first time, we push <code>int 100</code> onto the stack, then the current timestamp and we subtract <code>100</code> from the timestamp. Next, we push another timestamp onto the stack and subtract the first created timestamp from the second one. The result should be <code>100</code> because the operation is so fast the timestamp doesn't really have time to update the second time we push it.</p> <p>As you would expect, it is also possible to subtract mutez from one another to get the difference between the two amounts:</p> <div class="language-Michelson extra-class"><pre class="language-Michelson"><code class="language-Michelson"><span class="token operator">DROP</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">mutez</span><span class="token punctuation"> </span><span class="token number">25</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">mutez</span><span class="token punctuation"> </span><span class="token number">50</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">SUB</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span></code></pre></div><div class="stdout"><pre><span class="stream-name">stdout</span><br>DROP: pop 100;
PUSH: push 25;
PUSH: push 50;
SUB: pop 50, 25; push 25;</pre></div> <div class="embedded-html"><table><thead><tr><th>value                                  </th><th>type                                      </th></tr></thead> <tbody><tr><td><pre style="text-align:left;">25</pre></td><td><pre style="text-align:left;">mutez</pre></td></tr></tbody></table></div> <p>Once again, be careful of the order you push the elements onto the stack, for safety purposes, negative amounts of <code>mutez</code> are not allowed and the contract will fail if it happens:</p> <div class="language-Michelson extra-class"><pre class="language-Michelson"><code class="language-Michelson"><span class="token operator">DROP</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">mutez</span><span class="token punctuation"> </span><span class="token number">50</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">mutez</span><span class="token punctuation"> </span><span class="token number">25</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">SUB</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span></code></pre></div><div class="stdout"><pre><span class="stream-name">stdout</span><br>DROP: pop 25;
PUSH: push 50;
PUSH: push 25;
SUB: pop 25, 50;</pre></div> <div class="stderr"><pre><span class="stream-name">stderr</span><br>MichelsonRuntimeError: expected non-negative val
at SUB</pre></div> <h2 id="the-mul-instruction"><a href="#the-mul-instruction" class="header-anchor">#</a> The <strong><code>MUL</code></strong> instruction</h2> <p>Multiplications are far less common throughout Michelson types than addition or subtraction. For timestamps, they just don't make sense. For <code>mutez</code>, they are possible only under a certain condition. You can use it for <code>int</code> and <code>nat</code> values. The syntax is the same as addition and subtraction and this time, you can relax about the order of the elements 😊</p> <div class="language-Michelson extra-class"><pre class="language-Michelson"><code class="language-Michelson"><span class="token operator">DROP</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">int</span><span class="token punctuation"> </span><span class="token number">5</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">int</span><span class="token punctuation"> </span><span class="token number">4</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">MUL</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span></code></pre></div><div class="stdout"><pre><span class="stream-name">stdout</span><br>DROP: pop 25;
PUSH: push 5;
PUSH: push 4;
MUL: pop 4, 5; push 20;</pre></div> <div class="embedded-html"><table><thead><tr><th>value                                  </th><th>type                                    </th></tr></thead> <tbody><tr><td><pre style="text-align:left;">20</pre></td><td><pre style="text-align:left;">int</pre></td></tr></tbody></table></div> <div class="language-Michelson extra-class"><pre class="language-Michelson"><code class="language-Michelson"><span class="token operator">DROP</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">nat</span><span class="token punctuation"> </span><span class="token number">3</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">nat</span><span class="token punctuation"> </span><span class="token number">10</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">MUL</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span></code></pre></div><div class="stdout"><pre><span class="stream-name">stdout</span><br>DROP: pop 20;
PUSH: push 3;
PUSH: push 10;
MUL: pop 10, 3; push 30;</pre></div> <div class="embedded-html"><table><thead><tr><th>value                                  </th><th>type                                    </th></tr></thead> <tbody><tr><td><pre style="text-align:left;">30</pre></td><td><pre style="text-align:left;">nat</pre></td></tr></tbody></table></div> <p>As it is also the case for addition and subtraction, the multiplication of <code>int</code> and <code>nat</code> values together yields a new <code>int</code>:</p> <div class="language-Michelson extra-class"><pre class="language-Michelson"><code class="language-Michelson"><span class="token operator">DROP</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">int</span><span class="token punctuation"> </span><span class="token number">5</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">nat</span><span class="token punctuation"> </span><span class="token number">3</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">MUL</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span></code></pre></div><div class="stdout"><pre><span class="stream-name">stdout</span><br>DROP: pop 30;
PUSH: push 5;
PUSH: push 3;
MUL: pop 3, 5; push 15;</pre></div> <div class="embedded-html"><table><thead><tr><th>value                                  </th><th>type                                    </th></tr></thead> <tbody><tr><td><pre style="text-align:left;">15</pre></td><td><pre style="text-align:left;">int</pre></td></tr></tbody></table></div> <p>Finally, you can multiply <code>mutez</code> values with <code>nat</code> values:</p> <div class="language-Michelson extra-class"><pre class="language-Michelson"><code class="language-Michelson"><span class="token operator">DROP</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">mutez</span><span class="token punctuation"> </span><span class="token number">500</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">nat</span><span class="token punctuation"> </span><span class="token number">5</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">MUL</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span></code></pre></div><div class="stdout"><pre><span class="stream-name">stdout</span><br>DROP: pop 15;
PUSH: push 500;
PUSH: push 5;
MUL: pop 5, 500; push 2500;</pre></div> <div class="embedded-html"><table><thead><tr><th>value                                    </th><th>type                                      </th></tr></thead> <tbody><tr><td><pre style="text-align:left;">2500</pre></td><td><pre style="text-align:left;">mutez</pre></td></tr></tbody></table></div> <h2 id="the-ediv-instruction"><a href="#the-ediv-instruction" class="header-anchor">#</a> The <strong><code>EDIV</code></strong> instruction</h2> <p>Division in Michelson is a little more technical than the other arithmetic operations and requires more explanation.</p> <p>Michelson performs what is called a <a href="https://en.wikipedia.org/wiki/Euclidean_division" target="_blank" rel="noopener noreferrer">Euclidean division<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, hence the <strong>E</strong>(uclidean)<strong>DIV</strong>(ision) name. In a nutshell, a Euclidean division divides two numbers together and returns a result (formally known as the <em>quotient</em>) and a <em>remainder</em> (there are no float numbers in Michelson). If there is a pizza with 9 slices and 4 people who want pizza, a Euclidean division of the pizza will distribute 2 slices to everyone (total 8 slices) with 1 slice left.</p> <p>Keeping in mind this example, let's observe how the division and its result would look like in Michelson:</p> <div class="language-Michelson extra-class"><pre class="language-Michelson"><code class="language-Michelson"><span class="token operator">DROP</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">int</span><span class="token punctuation"> </span><span class="token number">4</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">int</span><span class="token punctuation"> </span><span class="token number">9</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">EDIV</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span></code></pre></div><div class="stdout"><pre><span class="stream-name">stdout</span><br>DROP: pop 2500;
PUSH: push 4;
PUSH: push 9;
EDIV: pop 9, 4; push ((2, 1),);</pre></div> <div class="embedded-html"><table><thead><tr><th>value                                               </th><th>type                                                      </th></tr></thead> <tbody><tr><td><pre style="text-align:left;">Some (Pair 2 1)</pre></td><td><pre style="text-align:left;">option (pair int nat)</pre></td></tr></tbody></table></div> <p>Now that's a surprise! The other arithmetic operations above only yield numbers but this one gives us a pretty complex result back! The result of <strong><code>EDIV</code></strong> is an option that contains a pair with the quotient (the result of the division) on the left and the remainder on the right. The quotient is of type <code>int</code> and the remainder is of type <code>nat</code> (unsurprisingly, the remainder cannot be a negative number).</p> <p>Outside of <code>int</code> and <code>nat</code>, you can use <strong><code>EDIV</code></strong> with <code>mutez</code> values, only if the divisor is of type <code>nat</code>:</p> <div class="language-Michelson extra-class"><pre class="language-Michelson"><code class="language-Michelson"><span class="token operator">DROP</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">nat</span><span class="token punctuation"> </span><span class="token number">5</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">mutez</span><span class="token punctuation"> </span><span class="token number">500</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">EDIV</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span></code></pre></div><div class="stdout"><pre><span class="stream-name">stdout</span><br>DROP: pop ((2, 1),);
PUSH: push 5;
PUSH: push 500;
EDIV: pop 500, 5; push ((100, 0),);</pre></div> <div class="embedded-html"><table><thead><tr><th>value                                                 </th><th>type                                                          </th></tr></thead> <tbody><tr><td><pre style="text-align:left;">Some (Pair 100 0)</pre></td><td><pre style="text-align:left;">option (pair mutez mutez)</pre></td></tr></tbody></table></div> <p>The example above is also great to demonstrate that the pair result can contain a <code>0</code> as the remainder of the division.</p> <h2 id="other-operations-on-numeric-values"><a href="#other-operations-on-numeric-values" class="header-anchor">#</a> Other operations on numeric values</h2> <p>Outside of arithmetic operations, you can use other operations to manipulate numeric values in Michelson. We've already talked about <strong><code>ABS</code></strong> earlier that turns an <code>int</code> value into a <code>nat</code>. Here is a refresher:</p> <div class="language-Michelson extra-class"><pre class="language-Michelson"><code class="language-Michelson"><span class="token operator">DROP</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">int</span><span class="token punctuation"> </span><span class="token number">5</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">ABS</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">int</span><span class="token punctuation"> </span><span class="token number">-6</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">ABS</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token keyword">DUMP</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span></code></pre></div><div class="stdout"><pre><span class="stream-name">stdout</span><br>DROP: pop ((100, 0),);
PUSH: push 5;
ABS: pop 5; push 5;
PUSH: push -6;
ABS: pop -6; push 6;</pre></div> <div class="embedded-html"><table><thead><tr><th>value                                 </th><th>type                                    </th></tr></thead> <tbody><tr><td><pre style="text-align:left;">6</pre></td><td><pre style="text-align:left;">nat</pre></td></tr> <tr><td><pre style="text-align:left;">5</pre></td><td><pre style="text-align:left;">nat</pre></td></tr></tbody></table></div> <p>You can use <strong><code>NEG</code></strong> to turn a positive value into a negative one. The result will logically be an <code>int</code> even if the value you give is a <code>nat</code>:</p> <div class="language-Michelson extra-class"><pre class="language-Michelson"><code class="language-Michelson"><span class="token keyword">DROP_ALL</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">int</span><span class="token punctuation"> </span><span class="token number">5</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">NEG</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">nat</span><span class="token punctuation"> </span><span class="token number">5</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">NEG</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token keyword">DUMP</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span></code></pre></div><div class="stdout"><pre><span class="stream-name">stdout</span><br>DROP_ALL: drop all;
PUSH: push 5;
NEG: pop 5; push -5;
PUSH: push 5;
NEG: pop 5; push -5;</pre></div> <div class="embedded-html"><table><thead><tr><th>value                                  </th><th>type                                    </th></tr></thead> <tbody><tr><td><pre style="text-align:left;">-5</pre></td><td><pre style="text-align:left;">int</pre></td></tr> <tr><td><pre style="text-align:left;">-5</pre></td><td><pre style="text-align:left;">int</pre></td></tr></tbody></table></div> <p>Sometimes, you may want to flip the type of a number from <code>nat</code> to <code>int</code> the same way <strong><code>ABS</code></strong> turns an <code>int</code> into a <code>nat</code>. In this case, you can use the <strong><code>INT</code></strong> instruction:</p> <div class="custom-block warning"><p class="custom-block-title">NOTE</p> <p>you may have noticed by now that Michelson is case-sensitive, writing <code>int</code> and <code>INT</code> is completely different, as is writing <code>pair</code>, <code>Pair</code> and <code>PAIR</code>. Types are always written in lowercase (<code>pair</code>), values are written with their first character uppercase (<code>Pair</code>) and instructions are all uppercase (<code>PAIR</code>).</p></div> <div class="language-Michelson extra-class"><pre class="language-Michelson"><code class="language-Michelson"><span class="token keyword">DROP_ALL</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">nat</span><span class="token punctuation"> </span><span class="token number">5</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">INT</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token keyword">DUMP</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span></code></pre></div><div class="stdout"><pre><span class="stream-name">stdout</span><br>DROP_ALL: drop all;
PUSH: push 5;
INT: pop 5; push 5;</pre></div> <div class="embedded-html"><table><thead><tr><th>value                                 </th><th>type                                    </th></tr></thead> <tbody><tr><td><pre style="text-align:left;">5</pre></td><td><pre style="text-align:left;">int</pre></td></tr></tbody></table></div> <p>Michelson offers also a practical shortcut to check if an <code>int</code> is positive and turn it into a <code>nat</code>: <strong><code>ISNAT</code></strong>. The instruction takes a value of type <code>int</code> and returns <code>None</code> if the <code>int</code> is less than <code>0</code> or <code>(Some nat)</code> if the <code>int</code> is greater than <code>0</code>:</p> <div class="language-Michelson extra-class"><pre class="language-Michelson"><code class="language-Michelson"><span class="token operator">DROP</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">int</span><span class="token punctuation"> </span><span class="token number">5</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">ISNAT</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">PUSH</span><span class="token punctuation"> </span><span class="token class-name">int</span><span class="token punctuation"> </span><span class="token number">-4</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token operator">ISNAT</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span><span class="token keyword">DUMP</span><span class="token punctuation"> </span><span class="token punctuation">;</span><span class="token punctuation">
</span></code></pre></div><div class="stdout"><pre><span class="stream-name">stdout</span><br>DROP: pop 5;
PUSH: push 5;
ISNAT: pop 5; push (5,);
PUSH: push -4;
ISNAT: pop -4; push None;</pre></div> <div class="embedded-html"><table><thead><tr><th>value                                      </th><th>type                                           </th></tr></thead> <tbody><tr><td><pre style="text-align:left;">None</pre></td><td><pre style="text-align:left;">option nat</pre></td></tr> <tr><td><pre style="text-align:left;">Some 5</pre></td><td><pre style="text-align:left;">option nat</pre></td></tr></tbody></table></div> <div id="bottom-right-wrapper" class="fab-wrapper" style="right:5vw;bottom:4vh;z-index:999;position:fixed;" data-v-f9cfe6e4><div id="bottom-right-action" class="actions-container" style="bottom:-20px;padding-bottom:20px;" data-v-f9cfe6e4><ul class="fab-list" style="display:none;" data-v-f9cfe6e4 data-v-f9cfe6e4><!----><!----></ul></div> <div class="fab-main pointer" style="background-color:#c6b29b;padding:28px;" data-v-f9cfe6e4><i class="md-24 material-icons main" data-v-f9cfe6e4>add</i> <i class="md-24 material-icons close" data-v-f9cfe6e4>add</i></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/chapters/03.html" class="prev">
        Chapter 3
      </a></span> <span class="next"><a href="/chapters/05.html">
        Chapter 5
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1efd7695.js" defer></script><script src="/assets/js/2.f4f16137.js" defer></script><script src="/assets/js/12.9f4477a1.js" defer></script><script src="/assets/js/4.ac851716.js" defer></script><script src="/assets/js/3.2c98d5d1.js" defer></script>
  </body>
</html>
